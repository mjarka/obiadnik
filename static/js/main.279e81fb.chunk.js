(this.webpackJsonpobiadnik_react=this.webpackJsonpobiadnik_react||[]).push([[0],{171:function(e,n,t){},172:function(e,n,t){},186:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),i=t(22),r=t.n(i),o=(t(171),t(172),t(247)),s=t(257),u=t(232),d=t(236),l=t(80),j=t(237),b=t(238),p=t(49),O=t(145),m=t.n(O),h=t(144),g=t.n(h),x=t(147),f=t.n(x),v=t(146),y=t.n(v),k=t(3);function C(){return Object(k.jsx)("div",{children:Object(k.jsx)(u.a,{position:"static",children:Object(k.jsxs)(d.a,{children:[Object(k.jsx)(l.a,{variant:"h6",children:"Obiados"}),Object(k.jsxs)(s.a,{xsDown:!0,children:[Object(k.jsx)(j.a,{color:"inherit",component:p.b,to:"/products",children:"Produkty"}),Object(k.jsx)(j.a,{color:"inherit",component:p.b,to:"/recipes",children:"Przepisy"}),Object(k.jsx)(j.a,{color:"inherit",component:p.b,to:"/calendar",children:"Kalendarz"}),Object(k.jsx)(j.a,{color:"inherit",component:p.b,to:"/basket",children:"Koszyk"})]}),Object(k.jsxs)(s.a,{smUp:!0,children:[Object(k.jsx)(b.a,{"aria-label":"delete",component:p.b,color:"inherit",to:"/products",children:Object(k.jsx)(g.a,{fontSize:"small"})}),Object(k.jsx)(b.a,{"aria-label":"delete",component:p.b,color:"inherit",to:"/recipes",children:Object(k.jsx)(m.a,{fontSize:"small"})}),Object(k.jsx)(b.a,{"aria-label":"delete",component:p.b,color:"inherit",to:"/calendar",children:Object(k.jsx)(y.a,{fontSize:"small"})}),Object(k.jsx)(b.a,{"aria-label":"delete",component:p.b,color:"inherit",to:"/basket",children:Object(k.jsx)(f.a,{fontSize:"small"})})]})]})})})}var I,S,z,$,w,D,N,Q,T,q,P,R,B=t(28),M=t(59),F=t.n(M),V=t(76),W=t(12),L=t(256),E=t(262),A=t(248),U=t(249),K=t(245),Z=t(107),J=t.n(Z),_=t(34),G=t(18),H=Object(G.gql)(I||(I=Object(_.a)(["\n  query {\n    recipes(where: { isSelected: true }) {\n      name\n      id\n      productsQuantity {\n        isTaken\n        value\n        id\n        product {\n          id\n          name\n          unit {\n            id\n            name\n          }\n          category {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"]))),X=Object(G.gql)(S||(S=Object(_.a)(["\n  query {\n    products {\n      name\n      id\n      unit {\n        id\n        name\n      }\n    }\n    recipes {\n      id\n      name\n      Recipe\n      productsQuantity {\n        product {\n          name\n          id\n          unit {\n            name\n            id\n          }\n        }\n        id\n        value\n      }\n    }\n  }\n"]))),Y=Object(G.gql)(z||(z=Object(_.a)(["\n  query {\n    recipes {\n      id\n      name\n      isSelected\n    }\n  }\n"]))),ee=Object(G.gql)($||($=Object(_.a)(["\n  mutation ($recipeId: ID!, $isSelected: Boolean!) {\n    updateRecipe(\n      input: { where: { id: $recipeId }, data: { isSelected: $isSelected } }\n    ) {\n      recipe {\n        id\n        name\n        isSelected\n      }\n    }\n  }\n"]))),ne=Object(G.gql)(w||(w=Object(_.a)(["\n  query {\n    products {\n      name\n      id\n      unit {\n        name\n        id\n      }\n      category {\n        name\n        id\n      }\n    }\n    units {\n      name\n      id\n    }\n    categories {\n      name\n      id\n    }\n  }\n"]))),te=Object(G.gql)(D||(D=Object(_.a)(["\n  mutation ($name: String!, $unit: ID!, $category: ID!) {\n    createProduct(\n      input: { data: { name: $name, unit: $unit, category: $category } }\n    ) {\n      product {\n        name\n        id\n        unit {\n          name\n          id\n        }\n        category {\n          id\n          name\n        }\n      }\n    }\n  }\n"]))),ae=Object(G.gql)(N||(N=Object(_.a)(["\n  mutation ($categoryName: String!) {\n    createCategory(input: { data: { name: $categoryName } }) {\n      category {\n        id\n        name\n      }\n    }\n  }\n"]))),ce=Object(G.gql)(Q||(Q=Object(_.a)(["\n  mutation (\n    $recipeName: String!\n    $recipeDescription: String!\n    $productIds: [ComponentProductsProductsQuantityInput!]\n  ) {\n    createRecipe(\n      input: {\n        data: {\n          Recipe: $recipeDescription\n          name: $recipeName\n          productsQuantity: $productIds\n        }\n      }\n    ) {\n      recipe {\n        id\n        Recipe\n        name\n        productsQuantity {\n          id\n          product {\n            id\n          }\n          value\n        }\n      }\n    }\n  }\n"]))),ie=Object(G.gql)(T||(T=Object(_.a)(["\n  mutation (\n    $recipeId: ID!\n    $recipeName: String!\n    $recipeDescription: String!\n    $productIds: [editComponentProductsProductsQuantityInput!]\n  ) {\n    updateRecipe(\n      input: {\n        where: { id: $recipeId }\n        data: {\n          Recipe: $recipeDescription\n          name: $recipeName\n          productsQuantity: $productIds\n        }\n      }\n    ) {\n      recipe {\n        id\n        Recipe\n        name\n        productsQuantity {\n          id\n          product {\n            id\n          }\n          value\n        }\n      }\n    }\n  }\n"]))),re=Object(G.gql)(q||(q=Object(_.a)(["\n  mutation ($recipeId: ID!) {\n    deleteRecipe(input: { where: { id: $recipeId } }) {\n      recipe {\n        id\n        name\n        Recipe\n      }\n    }\n  }\n"]))),oe=Object(G.gql)(P||(P=Object(_.a)(["\n  mutation ($productId: ID!) {\n    deleteProduct(input: { where: { id: $productId } }) {\n      product {\n        id\n        name\n      }\n    }\n  }\n"]))),se=Object(G.gql)(R||(R=Object(_.a)(["\n  mutation (\n    $recipeId: ID!\n    $productIds: [editComponentProductsProductsQuantityInput!]\n  ) {\n    updateRecipe(\n      input: {\n        where: { id: $recipeId }\n        data: { productsQuantity: $productIds }\n      }\n    ) {\n      recipe {\n        id\n        Recipe\n        name\n        productsQuantity {\n          id\n          isTaken\n          product {\n            id\n          }\n          value\n        }\n      }\n    }\n  }\n"]))),ue=t(246),de=t(260),le=t(261),je=t(240),be=t(241),pe=t(242),Oe=t(244);function me(e){var n=function(){e.onChange({name:"",color:""}),e.onToggle(!1)};return Object(k.jsx)(le.a,{open:e.open,onClose:n,"aria-labelledby":"form-dialog-title",children:Object(k.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.onValueChange({name:e.tempCategory.name,color:"Test"}),n()},children:[Object(k.jsx)(je.a,{id:"form-dialog-title",children:"Dodaj kategori\u0119"}),Object(k.jsxs)(be.a,{children:[Object(k.jsx)(pe.a,{children:"Brakuje kategorii? Dodaj j\u0105 tutaj"}),Object(k.jsx)(L.a,{autoFocus:!0,margin:"dense",id:"name",value:e.tempCategory.name,onChange:function(n){return e.onChange(Object(B.a)(Object(B.a)({},e.tempCategory),{},{name:n.target.value}))},label:"nazwa",type:"text"}),Object(k.jsx)(L.a,{margin:"dense",id:"name",value:e.tempCategory.color,onChange:function(n){return e.onChange(Object(B.a)(Object(B.a)({},e.tempCategory),{},{color:n.target.value}))},label:"kolor",type:"string"})]}),Object(k.jsxs)(Oe.a,{children:[Object(k.jsx)(j.a,{onClick:n,color:"primary",children:"Cancel"}),Object(k.jsx)(j.a,{type:"submit",color:"primary",children:"Add"})]})]})})}function he(e){return Object(k.jsxs)(le.a,{open:e.isOpen,keepMounted:!0,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(k.jsx)(je.a,{id:"alert-dialog-slide-title",children:e.title}),Object(k.jsx)(be.a,{children:Object(k.jsx)(pe.a,{id:"alert-dialog-slide-description",children:"Ta akcja jest nieodwracalna. Nie b\u0119dziesz p\u0142aka\u0107?"})}),Object(k.jsxs)(Oe.a,{children:[Object(k.jsx)(j.a,{color:"primary",onClick:e.onDelete,children:"Usu\u0144"}),Object(k.jsx)(j.a,{color:"primary",onClick:e.toggler,children:"Anuluj"})]})]})}function ge(){var e=Object(K.a)((function(e){return{divider:{marginTop:e.spacing(3),marginBottom:e.spacing(3)},chip:{marginRight:e.spacing(1),marginBottom:e.spacing(1)}}}))(),n=Object(ue.a)(),t=Object(a.useState)(null),c=Object(W.a)(t,2),i=(c[0],c[1]),r=Object(a.useState)(""),s=Object(W.a)(r,2),u=s[0],d=s[1],l=Object(a.useState)("1"),b=Object(W.a)(l,2),p=b[0],O=b[1],m=Object(a.useState)(""),h=Object(W.a)(m,2),g=h[0],x=h[1],f=Object(a.useState)("1"),v=Object(W.a)(f,2),y=v[0],C=v[1],I=Object(a.useState)([]),S=Object(W.a)(I,2),z=S[0],$=S[1],w=Object(a.useState)([]),D=Object(W.a)(w,2),N=(D[0],D[1]),Q=Object(a.useState)(),T=Object(W.a)(Q,2),q=T[0],P=T[1],R=Object(a.useState)([]),M=Object(W.a)(R,2),Z=M[0],_=(M[1],Object(a.useState)({name:"",color:""})),H=Object(W.a)(_,2),X=H[0],Y=H[1],ee=Object(a.useState)(!1),ce=Object(W.a)(ee,2),ie=ce[0],re=ce[1],se=Object(a.useState)(!1),le=Object(W.a)(se,2),je=le[0],be=le[1],pe=Object(G.useQuery)(ne),Oe=pe.loading,ge=(pe.error,pe.data),xe=pe.refetch,fe=Object(G.useMutation)(te),ve=Object(W.a)(fe,1)[0],ye=Object(G.useMutation)(ae),ke=Object(W.a)(ye,1)[0],Ce=Object(G.useMutation)(oe),Ie=Object(W.a)(Ce,1)[0];if(Oe)return"Loading...";var Se=function(){var e=Object(V.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie({variables:{productId:q}});case 2:return ze(),e.next=5,xe();case 5:d(""),$(""),x("");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ze=function(){return be(!je)};return Object(k.jsxs)(o.a,{children:[Object(k.jsxs)(A.a,{container:!0,spacing:3,className:e.divider,children:[Object(k.jsx)(A.a,{item:!0,xs:12,sm:4,children:Object(k.jsx)(L.a,{id:"standard-basic",label:"Wpisz nazw\u0119 produktu",fullWidth:!0,value:z,onChange:function(e){$(e.target.value)},required:!0})}),Object(k.jsx)(A.a,{item:!0,xs:12,sm:4,children:Object(k.jsx)(L.a,{id:"unit",select:!0,label:"Wybierz jednostk\u0119",value:g,fullWidth:!0,onChange:function(e){x(e.target.value)},children:ge.units.map((function(e){return Object(k.jsx)(U.a,{value:e.name,onClick:function(){return n=e.id,void C(n);var n},children:e.name},e.id)}))})}),Object(k.jsx)(A.a,{item:!0,xs:12,sm:4,children:Object(k.jsx)(de.a,{value:u,onChange:function(e,n){"string"===typeof n?setTimeout((function(){re(!0),Y({name:n,color:"wybierz kolor"})})):n&&n.inputValue?(re(!0),Y({name:n.inputValue,color:"wybierz kolor"})):(d(n.name),O(n.id))},filterOptions:function(e,t){var a=n(e,t);return""!==t.inputValue&&a.push({inputValue:t.inputValue,name:'Dodaj "'.concat(t.inputValue,'"')}),a},id:"wpisz kategori\u0119",options:ge.categories,getOptionLabel:function(e){return"string"===typeof e?e:e.inputValue?e.inputValue:e.name},selectOnFocus:!0,clearOnBlur:!0,getOptionSelected:function(e,n){return e.name===n},handleHomeEndKeys:!0,renderOption:function(e){return e.name},renderInput:function(e){return Object(k.jsx)(L.a,Object(B.a)(Object(B.a)({},e),{},{label:"Wybierz kategori\u0119"}))}})}),Object(k.jsx)(A.a,{item:!0,xs:4,sm:4,children:Object(k.jsx)(j.a,{variant:"contained",color:"primary",className:e.button,endIcon:Object(k.jsx)(J.a,{}),onClick:function(){var e={name:z,category:p,unit:y};Z.some((function(e){return e.name===z}))?console.log("ju\u017c mam takie co\u015b"):(ve({variables:e}),xe())},children:"Zapisz"})})]}),ge.products.map((function(n){return Object(k.jsx)(E.a,{className:e.chip,color:"primary",variant:"outlined",label:n.name,onDelete:function(){return e=n.id,ze(),void P(e);var e},onClick:function(e){return function(e){$(e.name),N(e.id),d(e.category.name),x(e.unit.name)}(n)}},n.id)})),Object(k.jsx)(he,{isOpen:je,toggler:ze,onDelete:Se,title:"Chcesz usun\u0105\u0107 ten produkt?"}),Object(k.jsx)(me,{onChange:function(e){Y(e)},tempCategory:X,onValueChange:function(e){i(e),ke({variables:{categoryName:e.name}}),xe()},onToggle:function(e){re(e)},open:ie,addCategory:function(e){}})]})}var xe=t(23),fe=(t(184),t(79)),ve=t(251);function ye(){var e=c.a.useState(null),n=Object(W.a)(e,2),t=(n[0],n[1]),a=c.a.useState(!1),i=Object(W.a)(a,2),r=i[0],o=i[1],s=c.a.useState({title:"",year:""}),u=Object(W.a)(s,2),d=u[0],l=u[1],b=function(){l({title:"",year:""}),o(!1)};return Object(k.jsx)(le.a,{open:r,onClose:b,"aria-labelledby":"form-dialog-title",children:Object(k.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({title:d.title,year:parseInt(d.year,10)}),b()},children:[Object(k.jsx)(je.a,{id:"form-dialog-title",children:"Dodaj nowy produkt"}),Object(k.jsxs)(be.a,{children:[Object(k.jsx)(pe.a,{children:"Zabrak\u0142o produktu na li\u015bcie? Dodaj go!"}),Object(k.jsx)(L.a,{autoFocus:!0,margin:"dense",id:"name",value:d.title,onChange:function(e){return l(Object(B.a)(Object(B.a)({},d),{},{title:e.target.value}))},label:"Nazwa",type:"text"}),Object(k.jsx)(L.a,{margin:"dense",id:"name",value:d.year,onChange:function(e){return l(Object(B.a)(Object(B.a)({},d),{},{year:e.target.value}))},label:"Kategoria",type:"text"})]}),Object(k.jsxs)(Oe.a,{children:[Object(k.jsx)(j.a,{onClick:b,color:"primary",children:"Cancel"}),Object(k.jsx)(j.a,{type:"submit",color:"primary",children:"Add"})]})]})})}var ke=t(152),Ce=t.n(ke);function Ie(){var e=Object(K.a)((function(e){return{divider:{marginTop:e.spacing(3),marginBottom:e.spacing(3)},chip:{marginRight:e.spacing(1),marginBottom:e.spacing(1)}}}))(),n=Object(a.useState)(""),t=Object(W.a)(n,2),c=t[0],i=t[1],r=Object(a.useState)({}),s=Object(W.a)(r,2),u=s[0],d=s[1],b=Object(a.useState)([""]),p=Object(W.a)(b,2),O=p[0],m=p[1],h=Object(a.useState)([""]),g=Object(W.a)(h,2),x=g[0],f=g[1],v=Object(a.useState)([]),y=Object(W.a)(v,2),C=y[0],I=y[1],S=Object(a.useState)(!1),z=Object(W.a)(S,2),$=z[0],w=z[1],D=Object(a.useState)(""),N=Object(W.a)(D,2),Q=N[0],T=N[1];Object(a.useEffect)((function(){m(c.name),f(c.Recipe)}),[c]);var q=Object(G.useQuery)(X),P=q.loading,R=(q.error,q.data),M=q.refetch,U=Object(G.useMutation)(ce),Z=Object(W.a)(U,1)[0],_=Object(G.useMutation)(ie),H=Object(W.a)(_,1)[0],Y=Object(G.useMutation)(re),ee=Object(W.a)(Y,1)[0];if(P)return"Loading...";var ne=function(){var e=Object(V.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee({variables:{recipeId:Q}});case 2:return te(),e.next=5,M();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){return w(!$)};return Object(k.jsxs)(o.a,{children:[Object(k.jsx)(ye,{}),Object(k.jsxs)(A.a,{container:!0,className:e.divider,spacing:3,children:[Object(k.jsxs)(A.a,{item:!0,sm:6,xs:12,children:[Object(k.jsx)(A.a,{item:!0,xs:12,children:Object(k.jsx)(L.a,{id:"recipeName",label:"Nazwa przepisu",value:O||"",onChange:function(e){m(e.target.value)},fullWidth:!0,required:!0})}),Object(k.jsx)(A.a,{item:!0,xs:12,className:e.divider,children:Object(k.jsx)(L.a,{id:"recipeDescription",label:"Przepis",multiline:!0,rowsMax:14,value:x||"",onChange:function(e){f(e.target.value)},fullWidth:!0})}),Object(k.jsx)(A.a,{item:!0,xs:12,className:e.divider,children:Object(k.jsx)(de.a,{disablePortal:!0,fullWidth:!0,multiple:!0,size:"small",id:"combo-box-demo",options:R.products,value:C,onChange:function(e,n){return I(n)},getOptionLabel:function(e){return e.name},renderInput:function(e){return Object(k.jsx)(L.a,Object(B.a)(Object(B.a)({},e),{},{variant:"standard",label:"Produkty"}))}})}),Object(k.jsxs)(A.a,{item:!0,xs:4,sm:4,children:[Object(k.jsx)(j.a,{disabled:!O||!1,variant:"contained",color:"primary",className:e.button,endIcon:Object(k.jsx)(J.a,{}),onClick:function(){var e=Object.entries(u).flatMap((function(e){var n=Object(W.a)(e,2),t=n[0];return[{value:n[1],product:t}]}));R.recipes.some((function(e){return e.name===O}))?H({variables:{recipeId:c.id,recipeName:O,recipeDescription:x,productIds:e}}):Z({variables:{recipeName:O,recipeDescription:x,productIds:e}}),M()},children:R.recipes.some((function(e){return e.name===O}))?"Aktualizuj":"Dodaj"}),Object(k.jsx)(he,{isOpen:$,toggler:te,onDelete:ne,title:"Chcesz usun\u0105\u0107 ten przepis?"})]})]}),Object(k.jsxs)(A.a,{item:!0,sm:6,xs:12,children:[C.length>0&&Object(k.jsx)(l.a,{variant:"caption",gutterBottom:!0,children:"Wpisz ilo\u015b\u0107 produkt\xf3w"}),Object(k.jsx)(A.a,{container:!0,children:C.map((function(e){return Object(k.jsx)(A.a,{item:!0,xs:6,children:Object(k.jsx)(L.a,{label:e.name,id:"standard-size-small",size:"small",value:u[e.id]||"",helperText:e.unit.name,onChange:function(n){return function(e,n){e.id in u?d(Ce()(u,Object(fe.a)({},e.id,{$set:n.target.value}))):d(Object(B.a)(Object(B.a)({},u),{},Object(fe.a)({},e.id,n.target.value)))}(e,n)}},e.id)},e.id)}))})]})]}),Object(k.jsx)(ve.a,{}),Object(k.jsx)(A.a,{container:!0,className:e.divider,spacing:3,children:Object(k.jsx)(A.a,{item:!0,xs:12,sm:12,children:R.recipes.map((function(n){return Object(k.jsx)(E.a,{className:e.chip,label:n.name,variant:"outlined",color:"primary",onDelete:function(){return e=n.id,w(!$),void T(e);var e},onClick:function(){return function(e){i(e);var n=e.productsQuantity.flatMap((function(e){return Object(fe.a)({},e.product.id,e.value)}));d(n.reduce((function(e,n){return Object.assign(e,n)}),{}));var t=e.productsQuantity.map((function(e){return e.product.id})),a=R.products.filter((function(e){return t.includes(e.id)}));I(a)}(n)}},n.id)}))})})]})}var Se=t(254),ze=t(255),$e=t(187),we=t(157),De=Object(we.a)({palette:{background:{default:"#F7F5F3"},primary:{main:"#63264A"}}});function Ne(){var e=Object(K.a)((function(e){return{divider:{marginTop:e.spacing(3),marginBottom:e.spacing(3)},chip:{marginRight:e.spacing(1),marginBottom:e.spacing(1)},section:{margin:e.spacing(3,1,1)}}}))(),n=Object(G.useQuery)(Y,{}),t=n.loading,a=(n.error,n.data),c=(n.refetch,Object(G.useMutation)(ee)),i=Object(W.a)(c,1)[0];if(t)return"Loading...";return Object(k.jsxs)(o.a,{children:[Object(k.jsx)(l.a,{variant:"h5",gutterBottom:!0,className:e.section,children:"Zaznacz przepisy do kupienia"}),Object(k.jsx)(A.a,{container:!0,spacing:3,className:e.divider,children:Object(k.jsx)(A.a,{item:!0,xs:12,sm:12,children:a.recipes.map((function(n){return Object(k.jsx)(E.a,{className:e.chip,variant:n.isSelected?"default":"outlined",label:n.name,color:n.isSelected?"primary":"default",onClick:function(){return function(e){console.log(e),i({variables:{recipeId:e.id,isSelected:!e.isSelected}})}(n)}},n.id)}))})})]})}var Qe=t(243),Te=t(250),qe=t(188),Pe=t(252),Re=t(259),Be=t(253);function Me(e){var n=Object(a.useState)(),t=Object(W.a)(n,2),c=t[0],i=t[1];return Object(a.useEffect)((function(){i(e.recipes.map((function(n){return Object(k.jsxs)("div",{children:[Object(k.jsx)(Qe.a,{dense:!0,disablePadding:!0,subheader:Object(k.jsx)(Te.a,{children:n.name})}),n.productsQuantity.map((function(t){return Object(k.jsxs)(qe.a,{role:void 0,button:!0,children:[Object(k.jsx)(Pe.a,{children:Object(k.jsx)(Re.a,{edge:"start",tabIndex:-1,disableRipple:!0,checked:t.isTaken,onClick:function(){return e.onChange(t.id,n.id,t.isTaken,e.recipes.indexOf(n),n.productsQuantity.indexOf(t))}})}),Object(k.jsx)(Be.a,{id:t.id,primary:t.product.name,secondary:t.value+" "+t.product.unit.name})]},t.id)}))]},n.id)})))}),[e.recipes]),Object(k.jsx)(A.a,{item:!0,xs:12,sm:12,children:c})}var Fe=t(153);function Ve(e){for(var n=e.recipes,t=n.flatMap((function(e){return e.productsQuantity.map((function(t){return{recipeIndex:n.indexOf(e),productIndex:e.productsQuantity.indexOf(t),recipeId:e.id,productName:t.product.name,productId:t.id,productCategory:t.product.category.name,isTaken:t.isTaken,productUnit:t.product.unit.name,productValue:t.value}}))})),a=Object(Fe.groupBy)(t,(function(e){return e.productCategory})),c=[],i=0,r=Object.entries(a);i<r.length;i++){var o=Object(W.a)(r[i],2),s=o[0],u=o[1];c.push(Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Qe.a,{dense:!0,disablePadding:!0,subheader:Object(k.jsx)(Te.a,{children:s})}),u.map((function(n){return Object(k.jsxs)(qe.a,{role:void 0,button:!0,children:[Object(k.jsx)(Pe.a,{children:Object(k.jsx)(Re.a,{edge:"start",tabIndex:-1,disableRipple:!0,checked:n.isTaken,onClick:function(){return e.onChange(n.productId,n.recipeId,n.isTaken,n.recipeIndex,n.productIndex)}})}),Object(k.jsx)(Be.a,{id:n.productId,primary:n.productName,secondary:n.productValue+" "+n.productUnit})]},n.productId)}))]}))}return Object(k.jsx)(A.a,{item:!0,xs:12,sm:12,children:c})}var We,Le=Object(K.a)((function(e){return{section:{margin:e.spacing(3,1,1)}}}));function Ee(){var e=Le(),n=Object(a.useState)([]),t=Object(W.a)(n,2),c=t[0],i=(t[1],Object(a.useState)(!1)),r=Object(W.a)(i,2),s=r[0],u=r[1],d=Object(G.useQuery)(H),b=d.loading,p=d.error,O=d.data,m=d.refetch,h=Object(G.useMutation)(se),g=Object(W.a)(h,1)[0];if(Object(a.useEffect)((function(){m()}),[]),b)return"Loading...";if(p)return"Error! ".concat(p);var x=function(){var e=Object(V.a)(F.a.mark((function e(n,t,a,c,i){var r,o;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={id:n,isTaken:!a},(o=O.recipes[c].productsQuantity.map((function(e){return{id:e.id,isTaken:e.isTaken}})))[i]=r,e.next=5,g({variables:{recipeId:t,productIds:o}});case 5:return e.next=7,m();case 7:case"end":return e.stop()}}),e)})));return function(n,t,a,c,i){return e.apply(this,arguments)}}();return Object(k.jsxs)(o.a,{children:[Object(k.jsx)(l.a,{variant:"h5",gutterBottom:!0,className:e.section}),Object(k.jsx)(j.a,{color:"primary",variant:"contained",onClick:function(){return u(!s)},children:s?"W\u0142\u0105cz widok kategorii":"W\u0142\u0105cz widok przepis\xf3w"}),Object(k.jsx)(A.a,{container:!0,spacing:3,children:s?Object(k.jsx)(Me,{recipes:O.recipes,itemUnit:function(e){return c.filter((function(n){return n.id===e})).map((function(e){return e.name}))},onChange:x}):Object(k.jsx)(Ve,{recipes:O.recipes,onChange:x})})]})}var Ae=Object(G.gql)(We||(We=Object(_.a)(["\n  query {\n    recipes(where: { isSelected: true }) {\n      name\n      id\n      productsQuantity {\n        isTaken\n        value\n        id\n        product {\n          name\n          unit {\n            name\n          }\n          category {\n            name\n          }\n        }\n      }\n    }\n  }\n"])));function Ue(){var e=Object(G.useQuery)(Ae),n=e.loading,t=e.error,a=e.data;return n?Object(k.jsx)("p",{children:"Loading..."}):t?Object(k.jsx)("p",{children:"Error :("}):Object(k.jsx)("div",{children:a.recipes.map((function(e){return Object(k.jsx)("p",{children:e.id})}))})}var Ke=t(96),Ze=t(158),Je=t(68);function _e(){var e=new Ze.a({uri:"http://localhost:1337/graphql",cache:new Je.a});return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(Ke.ApolloProvider,{client:e,children:Object(k.jsxs)(Se.a,{theme:De,children:[Object(k.jsx)(ze.a,{}),Object(k.jsx)(p.a,{basename:"/obiadnik",children:Object(k.jsx)(o.a,{maxWidth:"md",disableGutters:!0,children:Object(k.jsxs)($e.a,{elevation:3,children:[Object(k.jsx)(C,{}),Object(k.jsxs)(xe.c,{children:[Object(k.jsx)(xe.a,{exact:!0,path:["/products","/"],children:Object(k.jsx)(ge,{})}),Object(k.jsx)(xe.a,{path:"/recipes",children:Object(k.jsx)(Ie,{})}),Object(k.jsx)(xe.a,{path:"/calendar",children:Object(k.jsx)(Ne,{})}),Object(k.jsx)(xe.a,{path:"/basket",children:Object(k.jsx)(Ee,{})}),Object(k.jsx)(xe.a,{path:"/apollo",children:Object(k.jsx)(Ue,{})})]})]})})})]})})})}var Ge=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,264)).then((function(n){var t=n.getCLS,a=n.getFID,c=n.getFCP,i=n.getLCP,r=n.getTTFB;t(e),a(e),c(e),i(e),r(e)}))};r.a.render(Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)(_e,{})}),document.getElementById("root")),Ge()}},[[186,1,2]]]);
//# sourceMappingURL=main.279e81fb.chunk.js.map