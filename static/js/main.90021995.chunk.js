(this.webpackJsonpobiadnik_react=this.webpackJsonpobiadnik_react||[]).push([[0],{119:function(e,t,n){},120:function(e,t,n){},147:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(13),r=n.n(i),o=(n(119),n(120),n(202)),s=n(218),l=n(194),u=n(198),j=n(56),d=n(199),b=n(200),p=n(31),O=n(101),h=n.n(O),m=n(100),f=n.n(m),x=n(103),g=n.n(x),v=n(102),y=n.n(v),k=n(2);function S(){return Object(k.jsx)("div",{children:Object(k.jsx)(l.a,{position:"static",children:Object(k.jsxs)(u.a,{children:[Object(k.jsx)(j.a,{variant:"h6",children:"Obiados"}),Object(k.jsxs)(s.a,{xsDown:!0,children:[Object(k.jsx)(d.a,{color:"inherit",component:p.b,to:"/products",children:"Produkty"}),Object(k.jsx)(d.a,{color:"inherit",component:p.b,to:"/recipes",children:"Przepisy"}),Object(k.jsx)(d.a,{color:"inherit",component:p.b,to:"/calendar",children:"Kalendarz"}),Object(k.jsx)(d.a,{color:"inherit",component:p.b,to:"/basket",children:"Koszyk"})]}),Object(k.jsxs)(s.a,{smUp:!0,children:[Object(k.jsx)(b.a,{"aria-label":"delete",component:p.b,color:"inherit",to:"/products",children:Object(k.jsx)(f.a,{fontSize:"small"})}),Object(k.jsx)(b.a,{"aria-label":"delete",component:p.b,color:"inherit",to:"/recipes",children:Object(k.jsx)(h.a,{fontSize:"small"})}),Object(k.jsx)(b.a,{"aria-label":"delete",component:p.b,color:"inherit",to:"/calendar",children:Object(k.jsx)(y.a,{fontSize:"small"})}),Object(k.jsx)(b.a,{"aria-label":"delete",component:p.b,color:"inherit",to:"/basket",children:Object(k.jsx)(g.a,{fontSize:"small"})})]})]})})})}var z=n(38),C=n(20),w=n.n(C),N=n(33),D=n(12),W=n(217),B=n(223),T=n(203),F=n(206),P=n(201),I=n(16),Q=n.n(I),R=n(104),E=n.n(R),q=n(69),Z=n.n(q),K="http://192.168.0.16:1337";function L(){var e=Object(P.a)((function(e){return{divider:{marginTop:e.spacing(3),marginBottom:e.spacing(3)},chip:{marginRight:e.spacing(1),marginBottom:e.spacing(1)}}}))(),t=Object(a.useState)(""),n=Object(D.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)(""),s=Object(D.a)(r,2),l=s[0],u=s[1],j=Object(a.useState)("1"),b=Object(D.a)(j,2),p=b[0],O=b[1],h=Object(a.useState)([]),m=Object(D.a)(h,2),f=m[0],x=m[1],g=Object(a.useState)(""),v=Object(D.a)(g,2),y=v[0],S=v[1],C=Object(a.useState)([]),I=Object(D.a)(C,2),R=I[0],q=I[1],L=Object(a.useState)("1"),M=Object(D.a)(L,2),U=M[0],_=M[1],A=Object(a.useState)([]),J=Object(D.a)(A,2),G=J[0],H=J[1],V=Object(a.useState)([]),X=Object(D.a)(V,2),Y=X[0],$=X[1],ee=Object(a.useState)([]),te=Object(D.a)(ee,2),ne=te[0],ae=te[1],ce=function(){};Object(a.useEffect)((function(){function e(){return(e=Object(N.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q.a.get(K+"/products?_sort=category:ASC").then((function(e){ae(e.data),console.log(e.data)})).catch((function(e){console.log(e)})),Q.a.get(K+"/units").then((function(e){q(e.data),S(e.data[0].name)})).catch((function(e){console.log(e)})),Q.a.get(K+"/categories").then((function(e){x(e.data),i(e.data[0].name),u(e.data[0].color)})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);return Object(k.jsxs)(o.a,{children:[Object(k.jsxs)(T.a,{container:!0,spacing:3,className:e.divider,children:[Object(k.jsx)(T.a,{item:!0,xs:12,sm:4,children:Object(k.jsx)(W.a,{id:"standard-basic",label:"Wpisz nazw\u0119 produktu",fullWidth:!0,value:G,onChange:function(e){H(e.target.value)},required:!0})}),Object(k.jsx)(T.a,{item:!0,xs:12,sm:4,children:Object(k.jsx)(W.a,{id:"unit",select:!0,label:"Wybierz jednostk\u0119",value:y,fullWidth:!0,onChange:function(e){S(e.target.value)},children:R.map((function(e){return Object(k.jsx)(F.a,{value:e.name,onClick:function(){return t=e.id,void _(t);var t},children:e.name},e.id)}))})}),Object(k.jsx)(T.a,{item:!0,xs:12,sm:4,children:Object(k.jsx)(W.a,{id:"category",select:!0,label:"Wybierz kategori\u0119",value:c,fullWidth:!0,onChange:function(e){i(e.target.value)},children:f.map((function(e){return Object(k.jsx)(F.a,{value:e.name,onClick:function(){return t=e.id,n=e.color,O(t),void u(n);var t,n},children:e.name},e.id)}))})}),Object(k.jsx)(T.a,{item:!0,xs:4,sm:4,children:Object(k.jsx)(d.a,{variant:"contained",color:"primary",className:e.button,endIcon:Object(k.jsx)(Z.a,{}),onClick:function(){var e=G,t=U,n=p;ne.some((function(t){return t.name===e}))?(console.log("ju\u017c mam takie co\u015b"),Q.a.put(K+"/products/"+Y,{name:e,category:n,unit:t}).then((function(e){console.log(e),console.log(e.data)}))):(Q.a.post(K+"/products",{name:e,category:n,unit:t}).then((function(e){console.log(e),console.log(e.data)})),ae((function(t){return[].concat(Object(z.a)(t),[{name:e,category:{color:l}}])})))},children:"Zapisz"})})]}),ne.map((function(t){return Object(k.jsx)(B.a,{className:e.chip,color:"primary",label:t.name,onDelete:ce,deleteIcon:Object(k.jsx)(E.a,{}),onClick:function(e){return function(e,t){H(e.name),$(e.id),i(e.category.name),S(e.unit.name)}(t)}},t.id)}))]})}var M=n(14),U=n(70),_=n(18),A=n(212),J=n(220),G=n(222),H=n(207),V=n(208),X=n(209),Y=n(210);function $(){var e=c.a.useState(null),t=Object(D.a)(e,2),n=(t[0],t[1]),a=c.a.useState(!1),i=Object(D.a)(a,2),r=i[0],o=i[1],s=c.a.useState({title:"",year:""}),l=Object(D.a)(s,2),u=l[0],j=l[1],b=function(){j({title:"",year:""}),o(!1)};return Object(k.jsx)(G.a,{open:r,onClose:b,"aria-labelledby":"form-dialog-title",children:Object(k.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n({title:u.title,year:parseInt(u.year,10)}),b()},children:[Object(k.jsx)(H.a,{id:"form-dialog-title",children:"Dodaj nowy produkt"}),Object(k.jsxs)(V.a,{children:[Object(k.jsx)(X.a,{children:"Zabrak\u0142o produktu na li\u015bcie? Dodaj go!"}),Object(k.jsx)(W.a,{autoFocus:!0,margin:"dense",id:"name",value:u.title,onChange:function(e){return j(Object(_.a)(Object(_.a)({},u),{},{title:e.target.value}))},label:"Nazwa",type:"text"}),Object(k.jsx)(W.a,{margin:"dense",id:"name",value:u.year,onChange:function(e){return j(Object(_.a)(Object(_.a)({},u),{},{year:e.target.value}))},label:"Kategoria",type:"text"})]}),Object(k.jsxs)(Y.a,{children:[Object(k.jsx)(d.a,{onClick:b,color:"primary",children:"Cancel"}),Object(k.jsx)(d.a,{type:"submit",color:"primary",children:"Add"})]})]})})}function ee(){var e=Object(P.a)((function(e){return{divider:{marginTop:e.spacing(3),marginBottom:e.spacing(3)},chip:{marginRight:e.spacing(1),marginBottom:e.spacing(1)}}}))(),t=Object(a.useState)({recipeName:"",recipeDescription:""}),n=Object(D.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)([]),s=Object(D.a)(r,2),l=s[0],u=s[1],b=Object(a.useState)([]),p=Object(D.a)(b,2),O=p[0],h=p[1],m=Object(a.useState)([]),f=Object(D.a)(m,2),x=f[0],g=f[1],v=function(){},y=function(e){var t=e.target.value;i(Object(_.a)(Object(_.a)({},c),{},Object(U.a)({},e.target.id,t)))};Object(a.useEffect)((function(){function e(){return(e=Object(N.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q.a.get(K+"/recipes").then((function(e){u(e.data)})).catch((function(e){console.log(e)})),Q.a.get(K+"/products").then((function(e){h(e.data)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);return console.log(x),Object(k.jsxs)(o.a,{children:[Object(k.jsx)($,{}),Object(k.jsxs)(T.a,{container:!0,className:e.divider,spacing:3,children:[Object(k.jsxs)(T.a,{item:!0,sm:6,xs:12,children:[Object(k.jsx)(T.a,{item:!0,xs:12,children:Object(k.jsx)(W.a,{id:"recipeName",label:"Nazwa przepisu",value:c.recipeName,onChange:y,fullWidth:!0,required:!0})}),Object(k.jsx)(T.a,{item:!0,xs:12,className:e.divider,children:Object(k.jsx)(W.a,{id:"recipeDescription",label:"Przepis",multiline:!0,rowsMax:14,value:c.recipeDescription,onChange:y,fullWidth:!0})}),Object(k.jsx)(T.a,{item:!0,xs:12,className:e.divider,children:Object(k.jsx)(J.a,{disablePortal:!0,fullWidth:!0,multiple:!0,size:"small",id:"combo-box-demo",options:O,value:x,onChange:function(e,t){return g(t)},getOptionLabel:function(e){return e.name},renderInput:function(e){return Object(k.jsx)(W.a,Object(_.a)(Object(_.a)({},e),{},{variant:"standard",label:"Produkty"}))}})}),Object(k.jsx)(T.a,{item:!0,xs:4,sm:4,children:Object(k.jsx)(d.a,{variant:"contained",color:"primary",className:e.button,endIcon:Object(k.jsx)(Z.a,{}),onClick:function(){var e=x.map((function(e){var t={};return t.product=e.id,t.value=e.value,t})),t=c.recipeName,n=c.recipeDescription,a=e;Q.a.post(K+"/recipes",{name:t,Recipe:n,productsQuantity:a}).then((function(e){console.log(e),console.log(e.data)}))},children:"Zapisz"})})]}),Object(k.jsxs)(T.a,{item:!0,sm:6,xs:12,children:[x.length>0&&Object(k.jsx)(j.a,{variant:"caption",gutterBottom:!0,children:"Wpisz ilo\u015b\u0107 produkt\xf3w"}),Object(k.jsx)(T.a,{container:!0,children:x.map((function(e){return Object(k.jsx)(T.a,{item:!0,xs:6,children:Object(k.jsx)(W.a,{label:e.name,id:"standard-size-small",size:"small",helperText:e.unit.name,value:e.value,onChange:function(t){return function(e,t){console.log(t.target.value,e);var n=Object(z.a)(x),a=Object(_.a)({},n[x.indexOf(e)]);a.value=t.target.value,n[x.indexOf(e)]=a,g(n)}(e,t)}},e.id)})}))})]})]}),Object(k.jsx)(A.a,{}),Object(k.jsx)(T.a,{container:!0,className:e.divider,spacing:3,children:Object(k.jsx)(T.a,{item:!0,xs:12,sm:12,children:l.map((function(t){return Object(k.jsx)(B.a,{className:e.chip,label:t.name,color:"primary",onDelete:v,onClick:function(){return function(e){i(Object(_.a)(Object(_.a)({},e),{},{recipeName:e.name,recipeDescription:e.Recipe}));var t=e.productsQuantity.map((function(e){return e.product.id})),n=O.filter((function(e){return t.includes(e.id)}));g(n),console.log(e)}(t)}},t.id)}))})})]})}var te=n(215),ne=n(216),ae=n(148),ce=n(107),ie=Object(ce.a)({palette:{background:{default:"#F7F5F3"},primary:{main:"#604D53"}}});function re(){var e=Object(P.a)((function(e){return{divider:{marginTop:e.spacing(3),marginBottom:e.spacing(3)},chip:{marginRight:e.spacing(1),marginBottom:e.spacing(1)},section:{margin:e.spacing(3,1,1)}}}))(),t=Object(a.useState)([]),n=Object(D.a)(t,2),c=n[0],i=n[1];Object(a.useEffect)((function(){function e(){return(e=Object(N.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q.a.get(K+"/recipes").then((function(e){i(e.data),console.log(e.data)})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);return Object(k.jsxs)(o.a,{children:[Object(k.jsx)(j.a,{variant:"h5",gutterBottom:!0,className:e.section,children:"Zaznacz przepisy do kupienia"}),Object(k.jsx)(T.a,{container:!0,spacing:3,className:e.divider,children:Object(k.jsx)(T.a,{item:!0,xs:12,sm:12,children:c.map((function(t){return Object(k.jsx)(B.a,{className:e.chip,label:t.name,color:t.isSelected?"primary":"",onClick:function(){return function(e){var t=c.indexOf(e);console.log(t);var n=Object(z.a)(c),a=Object(_.a)({},n[t]);!0===a.isSelected&&a.productsQuantity.map((function(e){return e.isTaken=!1})),a.isSelected=!a.isSelected,n[t]=a,i(n),console.log(c),Q.a.put(K+"/recipes/"+e.id,a).then((function(e){console.log(e)}))}(t)}},t.id)}))})})]})}var oe=n(205),se=n(211),le=n(149),ue=n(213),je=n(221),de=n(214);function be(e){return Object(k.jsx)(T.a,{item:!0,xs:12,sm:12,children:e.recipes.map((function(t){return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(oe.a,{dense:!0,disablePadding:!0,subheader:Object(k.jsx)(se.a,{children:t.name})}),t.productsQuantity.map((function(n){return Object(k.jsxs)(le.a,{role:void 0,button:!0,children:[Object(k.jsx)(ue.a,{children:Object(k.jsx)(je.a,{edge:"start",tabIndex:-1,disableRipple:!0,checked:n.isTaken,onClick:function(){return function(t,n,a){var c=Object(z.a)(e.recipes),i=Object(_.a)({},c[t]);i.productsQuantity[n].isTaken=!i.productsQuantity[n].isTaken,c[t]=i,e.onChange(c),Q.a.put(K+"/recipes/"+a.id,a).then((function(e){console.log(e),console.log(e.data)}))}(e.recipes.indexOf(t),t.productsQuantity.indexOf(n),t)}})}),Object(k.jsx)(de.a,{id:n.id,primary:n.product.name,secondary:n.value+" "+e.itemUnit(n.product.unit)})]},n.id)}))]})}))})}var pe="query {\n  recipes(where: { isSelected: true }){\n    name\n    productsQuantity {\n      isTaken \n      value\n      product {\n        name\n        unit{name}\n        category {\n          name\n        }\n      }\n    }\n  }\n}\n",Oe=n(106);function he(e){var t=Object(a.useState)([]),n=Object(D.a)(t,2),c=n[0],i=n[1];Object(a.useEffect)((function(){function e(){return(e=Object(N.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q()({url:K+"/graphql",method:"post",data:{query:pe}}).then((function(e){console.log(e.data.data),i(e.data.data.recipes)})).catch((function(e){console.log(e.message)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);for(var r=c.flatMap((function(e){return e.productsQuantity.map((function(e){return e}))})),o=Object(Oe.groupBy)(r,(function(e){return e.product.category.name})),s=[],l=0,u=Object.entries(o);l<u.length;l++){var j=Object(D.a)(u[l],2),d=j[0],b=j[1];s.push(Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(oe.a,{dense:!0,disablePadding:!0,subheader:Object(k.jsx)(se.a,{children:d})}),b.map((function(e){return Object(k.jsxs)(le.a,{role:void 0,button:!0,children:[Object(k.jsx)(ue.a,{children:Object(k.jsx)(je.a,{edge:"start",tabIndex:-1,disableRipple:!0,checked:e.isTaken})}),Object(k.jsx)(de.a,{id:e.id,primary:e.product.name,secondary:e.value+" "+e.product.unit.name})]},e.id)}))]}))}return console.log(Object.entries(o)),Object(k.jsx)(T.a,{item:!0,xs:12,sm:12,children:s})}var me=Object(P.a)((function(e){return{section:{margin:e.spacing(3,1,1)}}}));function fe(){var e=me(),t=Object(a.useState)([]),n=Object(D.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)([]),s=Object(D.a)(r,2),l=s[0],u=s[1],b=Object(a.useState)(!0),p=Object(D.a)(b,2),O=p[0],h=p[1],m=Object(a.useState)(!1),f=Object(D.a)(m,2),x=f[0],g=f[1];return Object(a.useEffect)((function(){function e(){return(e=Object(N.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q.a.get(K+"/recipes?isSelected=true").then((function(e){i(e.data),g(!0)})).catch((function(e){console.log(e)})),Q.a.get(K+"/units").then((function(e){u(e.data)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(k.jsxs)(o.a,{children:[Object(k.jsx)(j.a,{variant:"h5",gutterBottom:!0,className:e.section,children:x?c.length?"Produkty do kupienia":"Nie ma \u017cadnych produkt\xf3w - znaznacz przepisy w kalendarzu":"Poczekaj chwilk\u0119..."}),Object(k.jsx)(d.a,{color:"secondary",variant:"contained",onClick:function(){return h(!O)},children:O?"W\u0142\u0105cz widok kategorii":"W\u0142\u0105cz widok przepis\xf3w"}),Object(k.jsx)(T.a,{container:!0,spacing:3,children:O?Object(k.jsx)(be,{recipes:c,itemUnit:function(e){return l.filter((function(t){return t.id===e})).map((function(e){return e.name}))},onChange:function(e){i(e)}}):Object(k.jsx)(he,{recipes:c})})]})}function xe(){return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(te.a,{theme:ie,children:[Object(k.jsx)(ne.a,{}),Object(k.jsx)(p.a,{basename:"/obiadnik",children:Object(k.jsx)(o.a,{maxWidth:"md",disableGutters:"true",children:Object(k.jsxs)(ae.a,{elevation:3,children:[Object(k.jsx)(S,{}),Object(k.jsxs)(M.c,{children:[Object(k.jsx)(M.a,{exact:!0,path:["/products","/"],children:Object(k.jsx)(L,{})}),Object(k.jsx)(M.a,{path:"/recipes",children:Object(k.jsx)(ee,{})}),Object(k.jsx)(M.a,{path:"/calendar",children:Object(k.jsx)(re,{})}),Object(k.jsx)(M.a,{path:"/basket",children:Object(k.jsx)(fe,{})})]})]})})})]})})}var ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,225)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};r.a.render(Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)(xe,{})}),document.getElementById("root")),ge()}},[[147,1,2]]]);
//# sourceMappingURL=main.90021995.chunk.js.map